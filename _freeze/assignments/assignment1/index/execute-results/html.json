{
  "hash": "7fb7901b4c3fecad0af71769ab9cb763",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 1: Census Data Quality for Policy Decisions\"\nsubtitle: \"Evaluating Data Reliability for Algorithmic Decision-Making\"\nauthor: \"Zhe Fang\"\ndate: today\nformat: \n  html:\n    code-fold: false\n    toc: true\n    toc-location: left\n    theme: cosmo\nexecute:\n  warning: false\n  message: false\n---\n\n## Assignment Overview\n\n### Scenario\n\nYou are a data analyst for the **Pennsylvania Department of Human Services**. The department is considering implementing an algorithmic system to identify communities that should receive priority for social service funding and outreach programs. Your supervisor has asked you to evaluate the quality and reliability of available census data to inform this decision.\n\nDrawing on our Week 2 discussion of algorithmic bias, you need to assess not just what the data shows, but how reliable it is and what communities might be affected by data quality issues.\n\n### Learning Objectives\n\n- Apply dplyr functions to real census data for policy analysis\n- Evaluate data quality using margins of error\n- Connect technical analysis to algorithmic decision-making\n- Identify potential equity implications of data reliability issues\n- Create professional documentation for policy stakeholders\n\n---\n\n## Part 1: Portfolio Integration\n\nThis assignment has been integrated into my portfolio website at [Assignment 1 Page](https://mayaano.github.io/portfolio-setup-Mayaano/assignments/assignment1/).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidycensus)\nlibrary(scales)\nlibrary(RColorBrewer)\n\ncensus_api_key(Sys.getenv(\"CENSUS_API_KEY\"), install = FALSE)\n\nacs_vars_2022 <- load_variables(2022, \"acs5\", cache = TRUE)\nhead(acs_vars_2022)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  name        label                                   concept          geography\n  <chr>       <chr>                                   <chr>            <chr>    \n1 B01001A_001 Estimate!!Total:                        Sex by Age (Whi… tract    \n2 B01001A_002 Estimate!!Total:!!Male:                 Sex by Age (Whi… tract    \n3 B01001A_003 Estimate!!Total:!!Male:!!Under 5 years  Sex by Age (Whi… tract    \n4 B01001A_004 Estimate!!Total:!!Male:!!5 to 9 years   Sex by Age (Whi… tract    \n5 B01001A_005 Estimate!!Total:!!Male:!!10 to 14 years Sex by Age (Whi… tract    \n6 B01001A_006 Estimate!!Total:!!Male:!!15 to 17 years Sex by Age (Whi… tract    \n```\n\n\n:::\n:::\n\n\n---\n\n## Part 2: County-Level Resource Assessment\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvars <- c(\n  total_pop = \"B01003_001\",      \n  median_income = \"B19013_001\",  \n  median_age = \"B01002_001\"      \n)\n\ncounty_data <- get_acs(\n  geography = \"county\",\n  state = \"PA\",\n  variables = vars,\n  year = 2022\n)\n\ncounty_wide <- county_data %>%\n  select(GEOID, NAME, variable, estimate) %>%\n  pivot_wider(names_from = variable, values_from = estimate)\n\nhead(county_wide)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  GEOID NAME                           median_age total_pop median_income\n  <chr> <chr>                               <dbl>     <dbl>         <dbl>\n1 42001 Adams County, Pennsylvania           43.8    104604         78975\n2 42003 Allegheny County, Pennsylvania       40.6   1245310         72537\n3 42005 Armstrong County, Pennsylvania       47       65538         61011\n4 42007 Beaver County, Pennsylvania          44.9    167629         67194\n5 42009 Bedford County, Pennsylvania         47.3     47613         58337\n6 42011 Berks County, Pennsylvania           39.9    428483         74617\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(county_wide)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"GEOID\"         \"NAME\"          \"median_age\"    \"total_pop\"    \n[5] \"median_income\"\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(scales)\nprint(class(county_wide))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(head(county_wide))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  GEOID NAME                           median_age total_pop median_income\n  <chr> <chr>                               <dbl>     <dbl>         <dbl>\n1 42001 Adams County, Pennsylvania           43.8    104604         78975\n2 42003 Allegheny County, Pennsylvania       40.6   1245310         72537\n3 42005 Armstrong County, Pennsylvania       47       65538         61011\n4 42007 Beaver County, Pennsylvania          44.9    167629         67194\n5 42009 Bedford County, Pennsylvania         47.3     47613         58337\n6 42011 Berks County, Pennsylvania           39.9    428483         74617\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(colnames(county_wide))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"GEOID\"         \"NAME\"          \"median_age\"    \"total_pop\"    \n[5] \"median_income\"\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(scales)\n\ncounty_wide <- county_wide %>%\n  mutate(NAME_short = gsub(\", Pennsylvania\", \"\", NAME))\n\nggplot(county_wide, aes(x = reorder(NAME_short, median_income), y = median_income)) +\n  geom_col(fill = \"steelblue\") +\n  coord_flip() +\n  scale_y_continuous(labels = dollar) +\n  labs(\n    title = \"Median Household Income by County (PA, 2022)\",\n    x = \"County\",\n    y = \"Median Household Income\"\n  ) +\n  theme(\n    axis.text.y = element_text(size = 5),   \n    plot.title = element_text(hjust = 0.5)  \n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n---\n\n## Part 3: Neighborhood-Level Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntract_data <- get_acs(\n  geography = \"tract\",\n  state = \"PA\",\n  county = \"Philadelphia\",\n  variables = vars,\n  year = 2022\n)\n\ntract_wide <- tract_data %>%\n  select(GEOID, NAME, variable, estimate) %>%\n  pivot_wider(names_from = variable, values_from = estimate)\n\nhead(tract_wide)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  GEOID       NAME                            median_age total_pop median_income\n  <chr>       <chr>                                <dbl>     <dbl>         <dbl>\n1 42101000101 Census Tract 1.01; Philadelphi…       31.9      1947        117250\n2 42101000102 Census Tract 1.02; Philadelphi…       31.9      2897         94974\n3 42101000200 Census Tract 2; Philadelphia C…       43.1      3486         98994\n4 42101000300 Census Tract 3; Philadelphia C…       36.3      3914         95234\n5 42101000401 Census Tract 4.01; Philadelphi…       33.7      2675         86293\n6 42101000403 Census Tract 4.03; Philadelphi…       45.5      1047        181066\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Histogram of tract-level median income\nggplot(tract_wide, aes(x = median_income)) +\n  geom_histogram(fill = \"darkgreen\", bins = 30, alpha = 0.7) +\n  scale_x_continuous(labels = dollar) +\n  labs(title = \"Distribution of Median Household Income by Tract\",\n       x = \"Median Household Income\", y = \"Count of Tracts\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n---\n\n## Part 4: Comprehensive Data Quality Evaluation\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntract_eval <- tract_data %>%\n  mutate(cv = moe / estimate) %>%\n  group_by(variable) %>%\n  summarize(\n    avg_cv = mean(cv, na.rm = TRUE),\n    high_moe = sum(cv > 0.15, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\ntract_eval\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 3\n  variable       avg_cv high_moe\n  <chr>           <dbl>    <int>\n1 median_age      0.169      160\n2 median_income   0.307      316\n3 total_pop     Inf          289\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Boxplot of coefficients of variation by variable\ntract_data %>%\n  mutate(cv = moe / estimate) %>%\n  ggplot(aes(x = variable, y = cv, fill = variable)) +\n  geom_boxplot() +\n  scale_y_continuous(labels = percent) +\n  labs(title = \"Coefficient of Variation by Variable\",\n       x = \"Variable\", y = \"Coefficient of Variation (MOE/Estimate)\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n---\n\n## Part 5: Policy Recommendations\n\nThe analysis shows that census data quality varies across geographies. County-level indicators are generally reliable, but tract-level indicators, especially median income, often have higher margins of error. Communities with smaller populations tend to have less precise estimates, raising risks of inequitable resource allocation.\n\n**Recommendations:**\n\n1. Use county-level data when feasible for stable decision-making.  \n2. For tract-level analyses, flag areas with CV > 15% as less reliable.  \n3. Supplement ACS estimates with administrative records or surveys for high-uncertainty tracts.  \n4. Document uncertainty in reports so stakeholders understand the limits of the data.  \n5. Monitor outcomes if algorithms are deployed, to ensure disadvantaged communities are not further marginalized.  \n\n---\n\n## Technical Notes\n\n- ACS 5-year estimates (2022) were used.  \n- All analyses conducted in R with the `tidycensus` and `tidyverse` packages.  \n- Census API key stored securely via environment variable.  \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}